<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í‹°í†¡ ë¼ì´ë¸Œ ëŒ€ì‹œë³´ë“œ</title>
  <style>
    :root {
      --bg-color: #0f0f12;
      --card-bg: #1c1c24;
      --primary: #ff0050;
      /* TikTok Red/Pink */
      --secondary: #00f2ea;
      /* TikTok Cyan */
      --text-main: #ffffff;
      --text-muted: #8a8b98;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-main);
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
    }

    header {
      width: 100%;
      max-width: 900px;
      margin-bottom: 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    h1 {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(to right, var(--secondary), var(--text-main), var(--primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      /* standard propery */
    }

    .controls {
      display: flex;
      gap: 12px;
    }

    button {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-main);
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    button:hover {
      background-color: #2a2a35;
      transform: translateY(-1px);
    }

    button.primary {
      background-color: var(--primary);
      border-color: var(--primary);
      box-shadow: 0 4px 15px rgba(255, 0, 80, 0.3);
    }

    button.primary:hover {
      background-color: #d60043;
      box-shadow: 0 6px 20px rgba(255, 0, 80, 0.4);
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    main {
      width: 100%;
      max-width: 900px;
    }

    .status-bar {
      margin-bottom: 20px;
      color: var(--text-muted);
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .spinner {
      width: 16px;
      height: 16px;
      border: 2px solid var(--text-muted);
      border-top: 2px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: none;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
    }

    .streamer-card {
      background-color: var(--card-bg);
      border-radius: 12px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      transition: transform 0.2s ease;
      position: relative;
    }

    .streamer-card:hover {
      transform: translateY(-2px);
      border-color: rgba(255, 255, 255, 0.1);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .streamer-info h3 {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .streamer-id-display {
      font-size: 0.9rem;
      color: var(--text-muted);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition: color 0.2s;
    }

    .streamer-id-display:hover {
      color: var(--secondary);
    }

    .stats-row {
      display: flex;
      gap: 15px;
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 8px;
      padding-top: 10px;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .stat-item {
      display: flex;
      flex-direction: column;
    }

    .stat-val {
      font-weight: 700;
      color: var(--text-main);
      font-size: 1rem;
    }

    .action-row {
      margin-top: auto;
      padding-top: 15px;
      display: flex;
      gap: 8px;
    }

    .btn-small {
      padding: 8px 12px;
      font-size: 0.8rem;
      flex: 1;
      justify-content: center;
    }

    .btn-outline {
      background: transparent;
      border: 1px solid var(--text-muted);
    }

    .btn-outline:hover {
      border-color: var(--text-main);
      background: rgba(255, 255, 255, 0.05);
    }

    .verified-badge {
      display: inline-block;
      background: linear-gradient(135deg, #00f2ea, #00d4ff);
      color: #000;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 700;
      margin-left: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .streamer-name-link {
      cursor: pointer;
      color: var(--secondary);
      text-decoration: none;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .streamer-name-link:hover {
      color: var(--primary);
      text-decoration: underline;
    }

    .dm-button {
      padding: 6px 12px;
      font-size: 0.75rem;
      background: linear-gradient(135deg, #00f2ea, #00d4ff);
      border: none;
      color: #000;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 700;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .dm-button:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0, 242, 234, 0.3);
    }
  </style>
</head>

<body>

  <header>
    <h1>TikTok Live Monitor</h1>
    <div class="controls">
      <button id="refreshBtn">ëª©ë¡ ìƒˆë¡œê³ ì¹¨</button>
      <button id="copyBtn">ì „ì²´ ID ë³µì‚¬</button>
      <button id="fullProcessBtn" class="primary"
        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none;">
        <span>âš¡ï¸ ì „ ê³¼ì • ìˆ˜í–‰</span>
      </button>
      <button id="verifyBtn" class="primary">
        <span>ğŸ” í¬ë¦¬ì—ì´í„° ê²€ì¦</span>
      </button>
      <button id="crawlBtn" class="primary">
        <span>í¬ë¦¬ì—ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</span>
      </button>
    </div>
  </header>

  <main>
    <div class="status-bar">
      <div class="spinner" id="spinner"></div>
      <span id="statusText">ì¤€ë¹„ë¨</span>
    </div>

    <div id="grid" class="card-grid">
      <!-- Cards will go here -->
    </div>
  </main>

  <script>
    const grid = document.getElementById('grid');
    const statusText = document.getElementById('statusText');
    const spinner = document.getElementById('spinner');
    const crawlBtn = document.getElementById('crawlBtn');
    const verifyBtn = document.getElementById('verifyBtn');
    const refreshBtn = document.getElementById('refreshBtn');
    const copyBtn = document.getElementById('copyBtn');

    let currentStreamers = [];

    function setLoading(isLoading, text) {
      statusText.textContent = text;
      spinner.style.display = isLoading ? 'block' : 'none';
      crawlBtn.disabled = isLoading;
      verifyBtn.disabled = isLoading;
    }

    // --- CORE FUNCTIONS ---

    async function loadStreamers() {
      try {
        const res = await fetch('/streamers?t=' + new Date().getTime());
        const data = await res.json();

        // Limit to 50
        const limited = data.streamers.slice(0, 50);
        currentStreamers = limited;

        renderCards(limited);

        const verified = limited.filter(s => s.verified_status === 'available').length;
        setLoading(false, `ì´ ${limited.length}ëª…ì˜ í¬ë¦¬ì—ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤. (ê²€ì¦ë¨: ${verified}ëª…)`);
      } catch (e) {
        setLoading(false, 'ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨');
        console.error(e);
      }
    }

    async function startCrawl() {
      setLoading(true, 'í¬ë¡¤ë§ ì§„í–‰ ì¤‘... (ì‹œê°„ì´ ì¡°ê¸ˆ ê±¸ë¦½ë‹ˆë‹¤)');
      try {
        const res = await fetch('/crawl', { method: 'POST' });

        if (!res.ok) {
          const text = await res.text();
          throw new Error(`Server Error: ${res.status} ${text}`);
        }

        const data = await res.json();

        if (data.status === 'success') {
          setLoading(false, 'í¬ë¡¤ë§ ì™„ë£Œ!');
          // Wait a bit more for file system to sync
          await new Promise(resolve => setTimeout(resolve, 4000));
          await loadStreamers();
          return true;
        } else {
          setLoading(false, 'í¬ë¡¤ë§ ì˜¤ë¥˜ ë°œìƒ: ' + (data.message || JSON.stringify(data)));
          return false;
        }
      } catch (e) {
        setLoading(false, 'ì‹¤íŒ¨: ' + e.message);
        console.error(e);
        return false;
      }
    }

    async function startFullProcess() {
      if (!confirm("âš ï¸ [í¬ë¡¤ë§ -> ê²€ì¦] ì „ ê³¼ì •ì„ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n\nì•½ 5~10ë¶„ ì •ë„ ì†Œìš”ë˜ë©°, ê²€ì¦ ë‹¨ê³„ì—ì„œ ë¸Œë¼ìš°ì €ê°€ ì—´ë¦½ë‹ˆë‹¤.\nì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        return;
      }

      // 1. Crawl
      console.log("Starting full process: Step 1 (Crawl)");
      const crawlSuccess = await startCrawl();
      if (!crawlSuccess) {
        alert("âŒ í¬ë¡¤ë§ ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨í•˜ì—¬ ì‘ì—…ì„ ì¤‘ë‹¨í•©ë‹ˆë‹¤.");
        return;
      }

      // Short pause
      await new Promise(resolve => setTimeout(resolve, 1000));

      // 2. Verify
      console.log("Starting full process: Step 2 (Verify)");
      // We call startVerification but we need to make sure we don't double confirm or anything.
      // startVerification has checks.
      // Also startVerification handles its own loading state.
      await startVerification();
    }

    async function startVerification() {
      if (!currentStreamers || currentStreamers.length === 0) {
        alert("ë¨¼ì € í¬ë¦¬ì—ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì£¼ì„¸ìš”.");
        return;
      }

      setLoading(true, 'âœ… ê²€ì¦ ì‹œì‘! ìë™ìœ¼ë¡œ ë°±ìŠ¤í…Œì´ì§€ í˜ì´ì§€ê°€ ì—´ë¦¬ê³  ì§„í–‰ë©ë‹ˆë‹¤...');

      try {
        const res = await fetch('/verify', { method: 'POST' });
        const data = await res.json();

        if (data.status === 'success') {
          // Start polling for results
          let checkCount = 0;
          const checkInterval = setInterval(async () => {
            checkCount++;

            // Check every 5 seconds
            const res = await fetch('/streamers');
            const data = await res.json();
            const verified = data.streamers.filter(s => s.verified_status === 'available').length;

            if (verified > 0) {
              // Found results!
              clearInterval(checkInterval);
              loadStreamers(); // This triggers re-render, which now sorts by verified status
              setLoading(false, `âœ… ê²€ì¦ ì™„ë£Œ! ${verified}ëª…ì˜ 'ì‚¬ìš© ê°€ëŠ¥' í¬ë¦¬ì—ì´í„°ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤.`);
              alert(`ğŸ‰ ê²€ì¦ ì™„ë£Œ!\n\nâœ“ ì‚¬ìš© ê°€ëŠ¥ í¬ë¦¬ì—ì´í„°: ${verified}ëª…\n\nìë™ìœ¼ë¡œ ìƒë‹¨ì— ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¹´ë“œì—ì„œ 'ë©”ì„¸ì§€ ë³´ë‚´ê¸°' ë²„íŠ¼ìœ¼ë¡œ ì—°ë½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
            } else if (checkCount > 120) {
              // Stop after 10 minutes
              clearInterval(checkInterval);
              setLoading(false, 'â±ï¸  ê²€ì¦ ì‹œê°„ ì´ˆê³¼. ë°±ìŠ¤í…Œì´ì§€ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ì§„í–‰í•´ì£¼ì„¸ìš”.');
            } else {
              setLoading(true, `â³ ê²€ì¦ ì¤‘... (${checkCount * 5}ì´ˆ)`);
            }
          }, 5000);
        } else {
          setLoading(false, 'âŒ ê²€ì¦ ì˜¤ë¥˜: ' + data.message);
        }
      } catch (e) {
        setLoading(false, 'âŒ ì„œë²„ ìš”ì²­ ì‹¤íŒ¨');
        console.error(e);
      }
    }

    function copyAll() {
      if (!currentStreamers || currentStreamers.length === 0) {
        alert("ë³µì‚¬í•  í¬ë¦¬ì—ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
        return;
      }
      // ID only, no @
      const textToCopy = currentStreamers.map(s => s.id).join('\n');
      copyToClipboard(textToCopy, copyBtn);
    }

    function copyId(id, btnElement) {
      copyToClipboard(id, btnElement, "ID ë³µì‚¬ë¨!");
    }

    function copyMessage(id, nickname, btnElement) {
      const name = nickname || id;
      const message = `[í¬ë¦¬ì—ì´í„° ì œì•ˆ]
ì•ˆë…•í•˜ì„¸ìš”, ì•„ì„œë¦¬ì•ˆ ìŠ¤íŠœë””ì˜¤ ì…ë‹ˆë‹¤.
ì €í¬ëŠ” ë”± 10ëª…ì˜ ì ì¬ì„±ì„ ì§€ë‹Œ í¬ë¦¬ì—ì´í„°ë¥¼ ë°œêµ´ í•˜ì—¬ íŒ€ì„ ê¾¸ë ¤ê°€ê³  ìˆìŠµë‹ˆë‹¤

${name} ë‹˜ê»˜ ì°¸ì—¬ë¥¼ ì œì•ˆë“œë ¤ë³´ê³  ì‹¶ì–´ì„œ ì•ˆë‚´ ë“œë¦½ë‹ˆë‹¤.

ì•„ì„œë¦¬ì•ˆë§Œì˜ íŠ¹ë³„ ì¸ì„¼í‹°ë¸Œë‚˜ ì±„ë„ ì„±ì¥ì— ëŒ€í•´ ëŒ€í™” ë‚˜ëˆ ë³´ì‹œë©´ ì¢‹ì„ë“¯ í•©ë‹ˆë‹¤ : )`;

      copyToClipboard(message, btnElement, "ë©˜íŠ¸ ë³µì‚¬ë¨!");
    }

    function copyMessageEn(id, nickname, btnElement) {
      const name = nickname || id;
      const message = `[Creator Proposal]
Hello, this is Arthurian Studio.
We are building a selected team of just 10 high-potential creators.

We are reaching out because we'd like to invite you, ${name}, to join us.

We would love to discuss Arthurian's exclusive incentives and channel growth strategies with you : )`;

      copyToClipboard(message, btnElement, "(ENG) ë³µì‚¬ë¨!");
    }

    function copyToClipboard(text, btnElement, successText = "ë³µì‚¬ë¨!") {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = btnElement.textContent;
        btnElement.textContent = successText;
        setTimeout(() => {
          btnElement.textContent = originalText;
        }, 1500);
      }).catch(err => {
        console.error('Failed to copy: ', err);
        alert('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨!');
      });
    }

    function openDM(id) {
      // Placeholder for actual DM functionality
      // For now, just open the profile
      window.open(`https://www.tiktok.com/@${id}`, '_blank');
    }

    async function sendMessage(creatorId, creatorName, btn) {
      if (!confirm(`'${creatorName}'ë‹˜ì—ê²Œ ìë™ìœ¼ë¡œ ë©”ì„¸ì§€ë¥¼ ë°œì†¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì£¼ì˜: ë¸Œë¼ìš°ì €ê°€ ì—´ë¦¬ê³  ìë™ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.`)) {
        return;
      }

      // Message text
      const message = `[í¬ë¦¬ì—ì´í„° ì œì•ˆ]
ì•ˆë…•í•˜ì„¸ìš”! íŠ¸ë Œë“œì›¨ì´ë¸Œ ì…ë‹ˆë‹¤.
ì €í¬ëŠ” ì„±ì¥ì„± ìˆê³  ì ì¬ì„±ì„ ì§€ë‹Œ í¬ë¦¬ì—ì´í„°ë¥¼ ë°œêµ´í•´ì„œ íŒ€ì„ ê¾¸ë ¤ê°€ê³  ìˆëŠ”ë°ìš”!

${creatorName} ë‹˜ì´ ëˆˆì— ë“¤ì–´ì™€ì„œ ë©”ì„¸ì§€ ë“œë ¸ìŠµë‹ˆë‹¤.

í˜‘ì—… ë§¤ì¹˜ë‚˜ ì¶”ê°€ í˜‘ì°¬ ë“±ì— ëŒ€í•´ ì ê¹ ëŒ€í™” ë‚˜ëˆ ë³´ì‹œë©´ ì¢‹ì„ë“¯ í•©ë‹ˆë‹¤ :)`;

      // UI Loading state
      const originalText = btn.innerHTML;
      btn.innerHTML = 'â³ ì „ì†¡ ì¤‘...';
      btn.disabled = true;

      try {
        const res = await fetch('/send_dm', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            handle: creatorId,
            message: message
          })
        });
        const data = await res.json();

        if (data.status === 'success') {
          alert(`âœ… ë©”ì„¸ì§€ ì „ì†¡ ì™„ë£Œ! (@${creatorId})`);
          btn.innerHTML = 'âœ… ì „ì†¡ë¨';
        } else {
          alert(`âŒ ì „ì†¡ ì‹¤íŒ¨: ${data.message}`);
          btn.innerHTML = originalText;
          btn.disabled = false;
        }
      } catch (e) {
        console.error(e);
        alert('âŒ ì„œë²„ í†µì‹  ì˜¤ë¥˜');
        btn.innerHTML = originalText;
        btn.disabled = false;
      }
    }

    function renderCards(streamers) {
      grid.innerHTML = '';

      if (!streamers || streamers.length === 0) {
        grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1/-1; text-align: center; padding: 40px; background: #1c1c24; border-radius: 12px;">
                        ìˆ˜ì§‘ëœ í¬ë¦¬ì—ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.<br>
                        'í¬ë¦¬ì—ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.
                    </div>
                `;
        return;
      }

      // Separate verified (available) and others
      const available = streamers.filter(s => s.verified_status === 'available');
      const others = streamers.filter(s => s.verified_status !== 'available');

      // Helper to create card HTML element
      const createCard = (s) => {
        const card = document.createElement('div');
        card.className = 'streamer-card';

        const displayNick = (s.nickname && s.nickname !== s.id) ? s.nickname : s.id;
        const isVerified = s.verified_status === 'available';
        const verifiedBadge = isVerified ? '<span class="verified-badge">âœ“ ì‚¬ìš© ê°€ëŠ¥</span>' : '';

        // Safe strings for onclick
        const safeNick = displayNick.replace(/'/g, "\\'");

        // Message button logic
        const messageButton = isVerified ?
          `<div style="margin-top: 10px; border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 10px;">
             <button class="btn-small dm-button" onclick="sendMessage('${s.id}', '${safeNick}', this)">
                ğŸ’¬ ë©”ì„¸ì§€ ë³´ë‚´ê¸°
             </button>
           </div>` : '';

        card.innerHTML = `
              <div class="card-header">
                  <div class="streamer-info">
                      <h3>
                          <span class="streamer-name-link" onclick="openDM('${s.id}')" title="í”„ë¡œí•„ ë³´ê¸°">
                              ${displayNick}
                          </span>
                          ${verifiedBadge}
                      </h3>
                      <div class="streamer-id-display" onclick="copyId('${s.id}', this)">
                          <span>@${s.id}</span>
                          <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M8 4v12a2 2 0 002 2h8a2 2 0 002-2V7.243a2 2 0 00-.586-1.414l-5-5A2 2 0 0013.071 4H10a2 2 0 00-2 2z"></path></svg>
                      </div>
                  </div>
              </div>

              <div class="stats-row">
                  <div class="stat-item">
                      <span>Followers</span>
                      <span class="stat-val">${s.followers || '-'}</span>
                  </div>
                  <div class="stat-item">
                      <span>Likes</span>
                      <span class="stat-val">${s.likes || '-'}</span>
                  </div>
              </div>

              <div class="action-row">
                  <button class="btn-small btn-outline" onclick="copyMessage('${s.id}', '${safeNick}', this)" style="margin-right: 5px;">
                      ë©˜íŠ¸ ë³µì‚¬
                  </button>
                  <button class="btn-small btn-outline" onclick="copyMessageEn('${s.id}', '${safeNick}', this)">
                      (ENG) ë³µì‚¬
                  </button>
                  <div style="flex:1"></div>
                  <div style="flex:1; text-align:right;">
                      ${isVerified ?
            `<button class="btn-small primary" onclick="openDM('${s.id}')" style="width:100%">
                              í”„ë¡œí•„ í™•ì¸
                           </button>` :
            `<a href="https://www.tiktok.com/@${s.id}/live" target="_blank" style="display:block; width:100%">
                              ë¼ì´ë¸Œ ê°€ê¸°
                              </button>
                           </a>`
          }
                  </div>
              </div>
              
              ${messageButton}
          `;
        return card;
      };

      // 1. Render Available Streamers Section
      if (available.length > 0) {
        const header = document.createElement('div');
        header.style.gridColumn = '1 / -1';
        header.style.padding = '10px 0';
        header.style.color = '#00f2ea';
        header.style.fontSize = '1.2rem';
        header.style.fontWeight = 'bold';
        header.style.borderBottom = '1px solid rgba(0, 242, 234, 0.2)';
        header.style.marginBottom = '10px';
        header.innerHTML = `âœ¨ ì‚¬ìš© ê°€ëŠ¥ í¬ë¦¬ì—ì´í„°(${available.length}ëª…)`;
        grid.appendChild(header);

        available.forEach(s => {
          grid.appendChild(createCard(s));
        });
      }

      // 2. Render Divider & Others Section
      if (others.length > 0) {
        const divider = document.createElement('div');
        divider.style.gridColumn = '1 / -1';
        divider.style.marginTop = '40px';
        divider.style.marginBottom = '10px';
        divider.style.paddingTop = '20px';
        divider.style.borderTop = '2px dashed rgba(255, 255, 255, 0.1)';
        divider.style.textAlign = 'center';
        divider.style.color = '#8a8b98';
        divider.innerHTML = `â›”ï¸ ì‚¬ìš© ë¶ˆê°€ / ë¯¸ê²€ì¦(${others.length}ëª…)`;
        grid.appendChild(divider);

        others.forEach(s => {
          grid.appendChild(createCard(s));
        });
      }
    }

    // Event Listeners
    document.getElementById('fullProcessBtn').addEventListener('click', startFullProcess);
    crawlBtn.addEventListener('click', startCrawl);
    verifyBtn.addEventListener('click', startVerification);
    refreshBtn.addEventListener('click', loadStreamers);
    copyBtn.addEventListener('click', copyAll);

    // Initial load
    loadStreamers();
    refreshBtn.addEventListener('click', loadStreamers);
    copyBtn.addEventListener('click', copyAll);

    // Initial Load
    loadStreamers();
  </script>
</body>

</html>